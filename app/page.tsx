"use client";

import { useState } from "react";
import Image from "next/image";

export default function Home() {
  const [loading, setLoading] = useState(false);

  return (
    <main className="min-h-screen flex items-center justify-center p-8">
      <div className="w-full max-w-lg text-center">
        <h1 className="text-3xl font-semibold tracking-tight mb-6">Magic Canvas</h1>
        <p className="text-gray-500 mb-8">Keyboard-less and Mouse-less multiplayer whiteboard. Use your webcam and mic to do gesture and voice control.</p>
        <button
          onClick={async () => {
            try {
              setLoading(true);
              const res = await fetch("/api/rooms", { method: "POST" });
              const json = await res.json();
              if (json?.url) {
                window.location.href = json.url;
              }
            } finally {
              setLoading(false);
            }
          }}
          className="inline-flex items-center justify-center rounded-md bg-black text-white px-5 py-3 text-sm font-medium hover:bg-black/85 focus:outline-none focus:ring-2 focus:ring-black/20 disabled:opacity-60"
          disabled={loading}
        >
          {loading ? "Creatingâ€¦" : "Create Whiteboard"}
        </button>
        
        <div className="mt-12 pt-8 border-t border-gray-200">
          <p className="text-xs text-gray-400 mb-4">Built with</p>
          <div className="flex items-center justify-center gap-4 max-w-md mx-auto">
            <a href="https://supabase.com" target="_blank" rel="noreferrer" className="transition-opacity hover:opacity-80">
              <svg width="110" height="50" viewBox="0 0 581 113" fill="none" xmlns="http://www.w3.org/2000/svg" className="h-6">
                <path d="M151.397 66.7608C151.996 72.3621 157.091 81.9642 171.877 81.9642C184.764 81.9642 190.959 73.7624 190.959 65.7607C190.959 58.559 186.063 52.6577 176.373 50.6571L169.379 49.1569C166.682 48.6568 164.884 47.1565 164.884 44.7559C164.884 41.9552 167.681 39.8549 171.178 39.8549C176.772 39.8549 178.87 43.5556 179.27 46.4564L190.359 43.9558C189.76 38.6546 185.064 29.7527 171.078 29.7527C160.488 29.7527 152.696 37.0543 152.696 45.8561C152.696 52.7576 156.991 58.4591 166.482 60.5594L172.976 62.0598C176.772 62.8599 178.271 64.6605 178.271 66.8609C178.271 69.4615 176.173 71.762 171.777 71.762C165.983 71.762 163.085 68.1611 162.786 64.2602L151.397 66.7608Z" fill="currentColor"/>
                <path d="M233.421 80.4639H246.109C245.909 78.7635 245.609 75.3628 245.609 71.5618V31.2529H232.321V59.8592C232.321 65.5606 228.925 69.5614 223.031 69.5614C216.837 69.5614 214.039 65.1604 214.039 59.6592V31.2529H200.752V62.3599C200.752 73.0622 207.545 81.7642 219.434 81.7642C224.628 81.7642 230.325 79.7638 233.022 75.1627C233.022 77.1631 233.221 79.4636 233.421 80.4639Z" fill="currentColor"/>
                <path d="M273.076 99.4682V75.663C275.473 78.9636 280.469 81.6644 287.263 81.6644C301.149 81.6644 310.439 70.6617 310.439 55.7584C310.439 41.1553 302.148 30.1528 287.762 30.1528C280.37 30.1528 274.875 33.4534 272.677 37.2544V31.253H259.79V99.4682H273.076ZM297.352 55.8585C297.352 64.6606 291.958 69.7616 285.164 69.7616C278.372 69.7616 272.877 64.5605 272.877 55.8585C272.877 47.1566 278.372 42.0554 285.164 42.0554C291.958 42.0554 297.352 47.1566 297.352 55.8585Z" fill="currentColor"/>
                <path d="M317.964 67.0609C317.964 74.7627 324.357 81.8643 334.848 81.8643C342.139 81.8643 346.835 78.4634 349.332 74.5625C349.332 76.463 349.532 79.1635 349.832 80.4639H362.02C361.72 78.7635 361.422 75.2627 361.422 72.6622V48.4567C361.422 38.5545 355.627 29.7527 340.043 29.7527C326.855 29.7527 319.761 38.2544 318.963 45.9562L330.751 48.4567C331.151 44.1558 334.348 40.455 340.141 40.455C345.737 40.455 348.434 43.3556 348.434 46.8564C348.434 48.5568 347.536 49.9572 344.738 50.3572L332.65 52.1576C324.458 53.3579 317.964 58.2589 317.964 67.0609ZM337.644 71.962C333.349 71.962 331.25 69.1614 331.25 66.2608C331.25 62.4599 333.947 60.5594 337.345 60.0594L348.434 58.359V60.5594C348.434 69.2615 343.239 71.962 337.644 71.962Z" fill="currentColor"/>
                <path d="M387.703 80.4641V74.4627C390.299 78.6637 395.494 81.6644 402.288 81.6644C416.276 81.6644 425.467 70.5618 425.467 55.6585C425.467 41.0552 417.174 29.9528 402.788 29.9528C395.494 29.9528 390.1 33.1535 387.902 36.6541V8.04785H374.815V80.4641H387.703ZM412.178 55.7584C412.178 64.7605 406.784 69.7616 399.99 69.7616C393.297 69.7616 387.703 64.6606 387.703 55.7584C387.703 46.7564 393.297 41.8554 399.99 41.8554C406.784 41.8554 412.178 46.7564 412.178 55.7584Z" fill="currentColor"/>
                <path d="M432.99 67.0609C432.99 74.7627 439.383 81.8643 449.873 81.8643C457.165 81.8643 461.862 78.4634 464.358 74.5625C464.358 76.463 464.559 79.1635 464.858 80.4639H477.046C476.748 78.7635 476.448 75.2627 476.448 72.6622V48.4567C476.448 38.5545 470.653 29.7527 455.068 29.7527C441.881 29.7527 434.788 38.2544 433.989 45.9562L445.776 48.4567C446.177 44.1558 449.374 40.455 455.167 40.455C460.763 40.455 463.46 43.3556 463.46 46.8564C463.46 48.5568 462.561 49.9572 459.763 50.3572L447.676 52.1576C439.484 53.3579 432.99 58.2589 432.99 67.0609ZM452.671 71.962C448.375 71.962 446.276 69.1614 446.276 66.2608C446.276 62.4599 448.973 60.5594 452.371 60.0594L463.46 58.359V60.5594C463.46 69.2615 458.265 71.962 452.671 71.962Z" fill="currentColor"/>
                <path d="M485.645 66.7608C486.243 72.3621 491.339 81.9642 506.124 81.9642C519.012 81.9642 525.205 73.7624 525.205 65.7607C525.205 58.559 520.311 52.6577 510.62 50.6571L503.626 49.1569C500.929 48.6568 499.132 47.1565 499.132 44.7559C499.132 41.9552 501.928 39.8549 505.425 39.8549C511.021 39.8549 513.118 43.5556 513.519 46.4564L524.607 43.9558C524.007 38.6546 519.312 29.7527 505.326 29.7527C494.735 29.7527 486.944 37.0543 486.944 45.8561C486.944 52.7576 491.238 58.4591 500.73 60.5594L507.224 62.0598C511.021 62.8599 512.519 64.6605 512.519 66.8609C512.519 69.4615 510.421 71.762 506.025 71.762C500.23 71.762 497.334 68.1611 497.034 64.2602L485.645 66.7608Z" fill="currentColor"/>
                <path d="M545.385 50.2571C545.685 45.7562 549.482 40.5549 556.375 40.5549C563.967 40.5549 567.165 45.3561 567.365 50.2571H545.385ZM568.664 63.0601C567.065 67.4609 563.668 70.5617 557.474 70.5617C550.88 70.5617 545.385 65.8606 545.087 59.3593H580.252C580.252 59.159 580.451 57.1587 580.451 55.2582C580.451 39.4547 571.361 29.7527 556.175 29.7527C543.588 29.7527 531.998 39.9548 531.998 55.6584C531.998 72.262 543.886 81.9642 557.374 81.9642C569.462 81.9642 577.255 74.8626 579.753 66.3607L568.664 63.0601Z" fill="currentColor"/>
                <path d="M63.7076 110.284C60.8481 113.885 55.0502 111.912 54.9813 107.314L53.9738 40.0627L99.1935 40.0627C107.384 40.0627 111.952 49.5228 106.859 55.9374L63.7076 110.284Z" fill="url(#paint0_linear)"/>
                <path d="M63.7076 110.284C60.8481 113.885 55.0502 111.912 54.9813 107.314L53.9738 40.0627L99.1935 40.0627C107.384 40.0627 111.952 49.5228 106.859 55.9374L63.7076 110.284Z" fill="url(#paint1_linear)" fillOpacity="0.2"/>
                <path d="M45.317 2.07103C48.1765 -1.53037 53.9745 0.442937 54.0434 5.041L54.4849 72.2922H9.83113C1.64038 72.2922 -2.92775 62.8321 2.1655 56.4175L45.317 2.07103Z" fill="#3ECF8E"/>
                <defs>
                  <linearGradient id="paint0_linear" x1="53.9738" y1="54.974" x2="94.1635" y2="71.8295" gradientUnits="userSpaceOnUse">
                    <stop stopColor="#249361"/>
                    <stop offset="1" stopColor="#3ECF8E"/>
                  </linearGradient>
                  <linearGradient id="paint1_linear" x1="36.1558" y1="30.578" x2="54.4844" y2="65.0806" gradientUnits="userSpaceOnUse">
                    <stop/>
                    <stop offset="1" stopOpacity="0"/>
                  </linearGradient>
                </defs>
              </svg>
            </a>
            <a href="https://elevenlabs.io" target="_blank" rel="noreferrer" className="transition-opacity hover:opacity-80">
              <svg width="120" height="50" viewBox="0 0 694 90" fill="none" xmlns="http://www.w3.org/2000/svg" className="h-6">
                <path d="M248.261 22.1901H230.466L251.968 88.5124H271.123L292.625 22.1901H274.83L261.365 72.1488L248.261 22.1901Z" fill="currentColor"/>
                <path d="M0 0H18.413V88.5124H0V0Z" fill="currentColor"/>
                <path d="M36.5788 0H54.9917V88.5124H36.5788V0Z" fill="currentColor"/>
                <path d="M73.1551 0H127.652V14.7521H91.568V35.8264H125.181V50.5785H91.568V73.7603H127.652V88.5124H73.1551V0Z" fill="currentColor"/>
                <path d="M138.896 0H156.32V88.5124H138.896V0Z" fill="currentColor"/>
                <path d="M166.824 55.2893C166.824 31.1157 178.811 20.7025 197.471 20.7025C216.131 20.7025 226.759 30.9917 226.759 55.5372V59.5041H184.001C184.619 73.8843 188.944 78.719 197.224 78.719C203.773 78.719 207.851 74.876 208.593 68.1818H226.017C224.905 82.8099 212.795 90 197.224 90C177.452 90 166.824 79.4628 166.824 55.2893ZM209.582 47.9752C208.717 35.8264 204.515 31.8595 197.224 31.8595C189.933 31.8595 185.36 35.9504 184.125 47.9752H209.582Z" fill="currentColor"/>
                <path d="M295.962 55.2893C295.962 31.1157 307.949 20.7025 326.609 20.7025C345.269 20.7025 355.897 30.9917 355.897 55.5372V59.5041H313.139C313.757 73.8843 318.082 78.719 326.362 78.719C332.911 78.719 336.989 74.876 337.731 68.1818H355.155C354.043 82.8099 341.932 90 326.362 90C306.589 90 295.962 79.4628 295.962 55.2893ZM338.719 47.9752C337.854 35.8264 333.653 31.8595 326.362 31.8595C319.071 31.8595 314.498 35.9504 313.263 47.9752H338.719Z" fill="currentColor"/>
                <path d="M438.443 0H456.856V73.7603H491.457V88.5124H438.443V0Z" fill="currentColor"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M495.783 55.2893C495.783 30 507.399 20.7025 522.352 20.7025C529.766 20.7025 536.563 24.9174 539.282 29.3802V22.1901H557.077V88.5124H539.776V80.7025C537.181 85.9091 529.89 90 521.857 90C506.04 90 495.783 79.8347 495.783 55.2893ZM526.924 33.719C535.574 33.719 540.27 40.2893 540.27 55.2893C540.27 70.2893 535.574 76.9835 526.924 76.9835C518.274 76.9835 513.331 70.2893 513.331 55.2893C513.331 40.2893 518.274 33.719 526.924 33.719Z" fill="currentColor"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M587.847 80.7025V88.5124H570.547V0H587.971V29.3802C590.937 24.7934 597.857 20.7025 605.272 20.7025C619.854 20.7025 631.47 30 631.47 55.2893C631.47 80.5785 620.101 90 604.901 90C596.869 90 590.319 85.9091 587.847 80.7025ZM600.329 33.843C608.979 33.843 613.922 40.2893 613.922 55.2893C613.922 70.2893 608.979 76.9835 600.329 76.9835C591.678 76.9835 586.982 70.2893 586.982 55.2893C586.982 40.2893 591.678 33.843 600.329 33.843Z" fill="currentColor"/>
                <path d="M638.638 68.8017H656.062C656.309 75.7438 660.016 79.0909 666.566 79.0909C673.115 79.0909 676.823 76.1157 676.823 70.9091C676.823 66.1983 673.981 64.4628 667.802 62.9752L662.488 61.6116C647.412 57.7686 639.873 53.6777 639.873 41.157C639.873 28.6364 651.49 20.7025 666.319 20.7025C681.148 20.7025 692.394 26.5289 692.888 40.2893H675.463C675.093 34.2149 671.385 31.6116 666.072 31.6116C660.758 31.6116 657.05 34.2149 657.05 39.1736C657.05 43.7603 660.016 45.4959 665.207 46.7355L670.644 48.0992C684.979 51.6942 694 55.2893 694 68.6777C694 82.0661 682.137 90 666.072 90C648.647 90 639.008 83.4297 638.638 68.8017Z" fill="currentColor"/>
                <path d="M384.072 49.4628C384.072 39.0496 389.015 33.3471 396.677 33.3471C402.979 33.3471 406.563 37.314 406.563 45.8678V88.5124H423.987V43.1405C423.987 27.7686 415.337 20.7025 402.732 20.7025C394.205 20.7025 387.162 25.0413 384.072 30.7438V22.1901H366.401V88.5124H384.072V49.4628Z" fill="currentColor"/>
              </svg>
            </a>
            <a href="https://fal.ai" target="_blank" rel="noreferrer" className="transition-opacity hover:opacity-80">
              <svg width="50" height="50" viewBox="0 0 436 175" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M436.001 23.4839V151.377C436.001 171.666 435.773 172.578 433.268 172.578H402.296C399.791 172.578 399.336 171.666 399.336 151.377V23.4839C399.336 3.1943 399.791 2.28241 402.296 2.28241H433.268C435.773 2.28241 436.001 3.1943 436.001 23.4839Z" fill="black"/>
              <path d="M349.164 98.257V93.4696C349.164 82.0709 343.926 77.5115 334.816 77.5115C325.935 77.5115 321.152 82.2989 319.786 90.7339C319.331 93.2416 319.558 95.2934 318.192 95.2934H287.448C285.626 95.2934 285.626 94.8374 285.626 93.2416C285.626 81.1591 297.013 56.082 336.638 56.082C364.649 56.082 384.69 67.2527 384.69 98.257V143.852C384.69 154.338 390.383 169.157 390.383 171.208C390.383 172.12 389.7 172.576 389.017 172.576H354.857C353.263 172.576 353.035 171.664 351.896 165.965L350.985 161.634C350.302 158.214 349.847 157.074 348.48 157.074C346.658 157.074 345.52 161.178 340.51 165.965C335.044 170.98 328.44 174.4 317.053 174.4C298.607 174.4 281.982 163.913 281.982 141.116C281.982 115.583 301.795 104.64 331.173 103.5C346.431 102.816 349.164 104.412 349.164 98.257ZM349.164 131.313V126.754C349.164 122.194 348.025 120.826 344.153 121.054L335.727 121.51C325.024 122.194 318.647 127.666 318.647 137.924C318.647 147.955 324.113 152.971 332.084 152.971C340.965 152.971 349.164 144.764 349.164 131.313Z" fill="black"/>
              <path d="M220.001 85.9458C220.001 81.6143 218.179 81.1584 209.753 81.1584H205.654C204.06 81.1584 203.832 80.0185 203.832 70.6716V69.0758C203.832 59.7289 204.06 58.817 205.654 58.817H210.436C218.862 58.817 220.001 58.1331 220.001 54.0296V39.8953C220.001 13.2224 233.437 0 259.399 0C269.647 0 276.706 1.5958 277.845 2.27973C278.301 2.73567 278.301 3.41959 278.301 11.8546V14.8182C278.301 23.4812 278.301 25.533 277.617 25.533C276.934 25.533 273.746 23.4812 268.28 23.4812C260.993 23.4812 256.438 27.1288 256.438 39.8953V54.0296C256.438 58.1331 258.032 58.817 268.28 58.817H278.528C280.578 58.817 280.578 59.7289 280.578 69.0758V70.6716C280.578 80.0185 280.35 81.1584 278.756 81.1584H268.28C258.032 81.1584 256.438 81.6143 256.438 85.9458V151.374C256.438 171.664 255.755 172.576 253.933 172.576H222.278C220.456 172.576 220.001 171.664 220.001 151.374V85.9458Z" fill="black"/>
              <path fillRule="evenodd" clipRule="evenodd" d="M109.571 2.69C112.515 2.69 114.874 5.08348 115.155 8.01352C117.665 34.149 138.466 54.948 164.603 57.458C167.534 57.7394 169.927 60.0985 169.927 63.042V112.255C169.927 115.198 167.534 117.557 164.603 117.839C138.466 120.349 117.665 141.148 115.155 167.283C114.874 170.213 112.515 172.607 109.571 172.607H60.3553C57.4116 172.607 55.0524 170.213 54.7709 167.283C52.2608 141.148 31.4601 120.349 5.32289 117.839C2.39266 117.557 -0.000976562 115.198 -0.000976562 112.255V63.042C-0.000976562 60.0985 2.39267 57.7394 5.3229 57.458C31.4601 54.948 52.2608 34.149 54.7709 8.01351C55.0524 5.08348 57.4116 2.69 60.3553 2.69H109.571ZM34.1182 87.5045C34.1182 115.776 57.0124 138.694 85.2539 138.694C113.495 138.694 136.39 115.776 136.39 87.5045C136.39 59.2332 113.495 36.3147 85.2539 36.3147C57.0124 36.3147 34.1182 59.2332 34.1182 87.5045Z" fill="black"/>
              </svg>
            </a>
            <a href="https://ai.google.dev/gemini-api" target="_blank" rel="noreferrer" className="transition-opacity hover:opacity-80">
              <Image src="/gemini.png" alt="Google Gemini" className="h-10 w-auto" width={120} height={40} />
            </a>
          </div>
        </div>
      </div>
    </main>
  );
}


